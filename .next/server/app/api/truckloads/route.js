/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/truckloads/route";
exports.ids = ["app/api/truckloads/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("pg");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftruckloads%2Froute&page=%2Fapi%2Ftruckloads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftruckloads%2Froute.ts&appDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftruckloads%2Froute&page=%2Fapi%2Ftruckloads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftruckloads%2Froute.ts&appDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_reeceschlabach_Desktop_Timberline_Internal_app_api_truckloads_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/truckloads/route.ts */ \"(rsc)/./app/api/truckloads/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/truckloads/route\",\n        pathname: \"/api/truckloads\",\n        filename: \"route\",\n        bundlePath: \"app/api/truckloads/route\"\n    },\n    resolvedPagePath: \"/Users/reeceschlabach/Desktop/Timberline Internal/app/api/truckloads/route.ts\",\n    nextConfigOutput,\n    userland: _Users_reeceschlabach_Desktop_Timberline_Internal_app_api_truckloads_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/truckloads/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0cnVja2xvYWRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0cnVja2xvYWRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdHJ1Y2tsb2FkcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJlZWNlc2NobGFiYWNoJTJGRGVza3RvcCUyRlRpbWJlcmxpbmUlMjBJbnRlcm5hbCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyZWVjZXNjaGxhYmFjaCUyRkRlc2t0b3AlMkZUaW1iZXJsaW5lJTIwSW50ZXJuYWwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNkI7QUFDMUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aW1iZXJsaW5lLWxvZ2lzdGljcy1kYXNoYm9hcmQvPzA2NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3JlZWNlc2NobGFiYWNoL0Rlc2t0b3AvVGltYmVybGluZSBJbnRlcm5hbC9hcHAvYXBpL3RydWNrbG9hZHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RydWNrbG9hZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90cnVja2xvYWRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS90cnVja2xvYWRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3JlZWNlc2NobGFiYWNoL0Rlc2t0b3AvVGltYmVybGluZSBJbnRlcm5hbC9hcHAvYXBpL3RydWNrbG9hZHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdHJ1Y2tsb2Fkcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftruckloads%2Froute&page=%2Fapi%2Ftruckloads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftruckloads%2Froute.ts&appDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/truckloads/route.ts":
/*!*************************************!*\
  !*** ./app/api/truckloads/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\n\n// GET /api/truckloads - Get all truckloads\nasync function GET() {\n    try {\n        const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(`\n      WITH order_freight AS (\n        SELECT \n          o.id as order_id,\n          CASE \n            WHEN f.square_footage > 0 THEN f.square_footage\n            ELSE COALESCE(\n              (SELECT SUM(square_footage * quantity) FROM skids WHERE order_id = o.id), 0\n            ) + COALESCE(\n              (SELECT SUM(square_footage * quantity) FROM vinyl WHERE order_id = o.id), 0\n            )\n          END as total_footage\n        FROM orders o\n        LEFT JOIN footage f ON o.id = f.order_id\n        GROUP BY o.id, f.square_footage\n      )\n      SELECT \n        t.id,\n        t.driver_id,\n        t.start_date,\n        t.end_date,\n        t.trailer_number,\n        t.bill_of_lading_number,\n        t.description,\n        t.is_completed,\n        t.total_mileage,\n        t.estimated_duration,\n        u.full_name as driver_name,\n        d.color as driver_color,\n        COALESCE(SUM(CASE WHEN toa.assignment_type = 'pickup' THEN of.total_footage ELSE 0 END), 0) as pickup_footage,\n        COALESCE(SUM(CASE WHEN toa.assignment_type = 'delivery' THEN of.total_footage ELSE 0 END), 0) as delivery_footage,\n        COALESCE(SUM(CASE WHEN toa.assignment_type = 'transfer' THEN of.total_footage ELSE 0 END), 0) as transfer_footage\n      FROM truckloads t\n      LEFT JOIN drivers d ON t.driver_id = d.user_id\n      LEFT JOIN users u ON d.user_id = u.id\n      LEFT JOIN truckload_order_assignments toa ON t.id = toa.truckload_id\n      LEFT JOIN order_freight of ON toa.order_id = of.order_id\n      GROUP BY t.id, t.driver_id, t.start_date, t.end_date, t.trailer_number, t.bill_of_lading_number, \n               t.description, t.is_completed, t.total_mileage, t.estimated_duration, u.full_name, d.color\n      ORDER BY t.start_date DESC\n    `);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            truckloads: result.rows\n        });\n    } catch (error) {\n        console.error(\"Error fetching truckloads:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to fetch truckloads\"\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/truckloads - Create a new truckload\nasync function POST(request) {\n    const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authOptions);\n    if (!session?.user) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const client = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getClient)();\n    try {\n        const { driverId, startDate, endDate, trailerNumber, description } = await request.json();\n        // Validate required fields\n        if (!driverId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Driver is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!startDate || !endDate) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Start date and end date are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Start a transaction\n        await client.query(\"BEGIN\");\n        try {\n            // Insert into truckloads table\n            const result = await client.query(`INSERT INTO truckloads (\n          driver_id,\n          start_date,\n          end_date,\n          trailer_number,\n          description,\n          created_by\n        )\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id`, [\n                driverId,\n                startDate,\n                endDate,\n                trailerNumber || null,\n                description || \"\",\n                session.user.id\n            ]);\n            await client.query(\"COMMIT\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                truckloadId: result.rows[0].id,\n                message: \"Truckload created successfully\"\n            });\n        } catch (error) {\n            await client.query(\"ROLLBACK\");\n            throw error;\n        } finally{\n            client.release();\n        }\n    } catch (error) {\n        console.error(\"Error creating truckload:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Failed to create truckload\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RydWNrbG9hZHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEwQztBQUNDO0FBQ0M7QUFDSjtBQUV4QywyQ0FBMkM7QUFDcEMsZUFBZUs7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFNBQVMsTUFBTUwsOENBQUtBLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXdDNUIsQ0FBQztRQUVELE9BQU9ELGtGQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEMsWUFBWUgsT0FBT0ksSUFBSTtRQUN6QjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPWCxrRkFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RHLE9BQU87UUFDVCxHQUFHO1lBQUVFLFFBQVE7UUFBSTtJQUNuQjtBQUNGO0FBRUEsZ0RBQWdEO0FBQ3pDLGVBQWVDLEtBQUtDLE9BQWdCO0lBQ3pDLE1BQU1DLFVBQVUsTUFBTWIsMkRBQWdCQSxDQUFDQyxrREFBV0E7SUFFbEQsSUFBSSxDQUFDWSxTQUFTQyxNQUFNO1FBQ2xCLE9BQU9qQixrRkFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RHLE9BQU87UUFDVCxHQUFHO1lBQUVFLFFBQVE7UUFBSTtJQUNuQjtJQUVBLE1BQU1LLFNBQVMsTUFBTWhCLGtEQUFTQTtJQUU5QixJQUFJO1FBQ0YsTUFBTSxFQUFFaUIsUUFBUSxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsYUFBYSxFQUFFQyxXQUFXLEVBQUUsR0FBRyxNQUFNUixRQUFRUixJQUFJO1FBRXZGLDJCQUEyQjtRQUMzQixJQUFJLENBQUNZLFVBQVU7WUFDYixPQUFPbkIsa0ZBQVlBLENBQUNPLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RHLE9BQU87WUFDVCxHQUFHO2dCQUFFRSxRQUFRO1lBQUk7UUFDbkI7UUFFQSxJQUFJLENBQUNPLGFBQWEsQ0FBQ0MsU0FBUztZQUMxQixPQUFPckIsa0ZBQVlBLENBQUNPLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RHLE9BQU87WUFDVCxHQUFHO2dCQUFFRSxRQUFRO1lBQUk7UUFDbkI7UUFFQSxzQkFBc0I7UUFDdEIsTUFBTUssT0FBT2pCLEtBQUssQ0FBQztRQUVuQixJQUFJO1lBQ0YsK0JBQStCO1lBQy9CLE1BQU1LLFNBQVMsTUFBTVksT0FBT2pCLEtBQUssQ0FDL0IsQ0FBQzs7Ozs7Ozs7O29CQVNXLENBQUMsRUFDYjtnQkFDRWtCO2dCQUNBQztnQkFDQUM7Z0JBQ0FDLGlCQUFpQjtnQkFDakJDLGVBQWU7Z0JBQ2ZQLFFBQVFDLElBQUksQ0FBQ08sRUFBRTthQUNoQjtZQUdILE1BQU1OLE9BQU9qQixLQUFLLENBQUM7WUFFbkIsT0FBT0Qsa0ZBQVlBLENBQUNPLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RpQixhQUFhbkIsT0FBT0ksSUFBSSxDQUFDLEVBQUUsQ0FBQ2MsRUFBRTtnQkFDOUJFLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT2YsT0FBTztZQUNkLE1BQU1PLE9BQU9qQixLQUFLLENBQUM7WUFDbkIsTUFBTVU7UUFDUixTQUFVO1lBQ1JPLE9BQU9TLE9BQU87UUFDaEI7SUFDRixFQUFFLE9BQU9oQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9YLGtGQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEcsT0FBTztRQUNULEdBQUc7WUFBRUUsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aW1iZXJsaW5lLWxvZ2lzdGljcy1kYXNoYm9hcmQvLi9hcHAvYXBpL3RydWNrbG9hZHMvcm91dGUudHM/YTkzZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHF1ZXJ5LCBnZXRDbGllbnQgfSBmcm9tICdAL2xpYi9kYidcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGgnXG5cbi8vIEdFVCAvYXBpL3RydWNrbG9hZHMgLSBHZXQgYWxsIHRydWNrbG9hZHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoYFxuICAgICAgV0lUSCBvcmRlcl9mcmVpZ2h0IEFTIChcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIG8uaWQgYXMgb3JkZXJfaWQsXG4gICAgICAgICAgQ0FTRSBcbiAgICAgICAgICAgIFdIRU4gZi5zcXVhcmVfZm9vdGFnZSA+IDAgVEhFTiBmLnNxdWFyZV9mb290YWdlXG4gICAgICAgICAgICBFTFNFIENPQUxFU0NFKFxuICAgICAgICAgICAgICAoU0VMRUNUIFNVTShzcXVhcmVfZm9vdGFnZSAqIHF1YW50aXR5KSBGUk9NIHNraWRzIFdIRVJFIG9yZGVyX2lkID0gby5pZCksIDBcbiAgICAgICAgICAgICkgKyBDT0FMRVNDRShcbiAgICAgICAgICAgICAgKFNFTEVDVCBTVU0oc3F1YXJlX2Zvb3RhZ2UgKiBxdWFudGl0eSkgRlJPTSB2aW55bCBXSEVSRSBvcmRlcl9pZCA9IG8uaWQpLCAwXG4gICAgICAgICAgICApXG4gICAgICAgICAgRU5EIGFzIHRvdGFsX2Zvb3RhZ2VcbiAgICAgICAgRlJPTSBvcmRlcnMgb1xuICAgICAgICBMRUZUIEpPSU4gZm9vdGFnZSBmIE9OIG8uaWQgPSBmLm9yZGVyX2lkXG4gICAgICAgIEdST1VQIEJZIG8uaWQsIGYuc3F1YXJlX2Zvb3RhZ2VcbiAgICAgIClcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgdC5pZCxcbiAgICAgICAgdC5kcml2ZXJfaWQsXG4gICAgICAgIHQuc3RhcnRfZGF0ZSxcbiAgICAgICAgdC5lbmRfZGF0ZSxcbiAgICAgICAgdC50cmFpbGVyX251bWJlcixcbiAgICAgICAgdC5iaWxsX29mX2xhZGluZ19udW1iZXIsXG4gICAgICAgIHQuZGVzY3JpcHRpb24sXG4gICAgICAgIHQuaXNfY29tcGxldGVkLFxuICAgICAgICB0LnRvdGFsX21pbGVhZ2UsXG4gICAgICAgIHQuZXN0aW1hdGVkX2R1cmF0aW9uLFxuICAgICAgICB1LmZ1bGxfbmFtZSBhcyBkcml2ZXJfbmFtZSxcbiAgICAgICAgZC5jb2xvciBhcyBkcml2ZXJfY29sb3IsXG4gICAgICAgIENPQUxFU0NFKFNVTShDQVNFIFdIRU4gdG9hLmFzc2lnbm1lbnRfdHlwZSA9ICdwaWNrdXAnIFRIRU4gb2YudG90YWxfZm9vdGFnZSBFTFNFIDAgRU5EKSwgMCkgYXMgcGlja3VwX2Zvb3RhZ2UsXG4gICAgICAgIENPQUxFU0NFKFNVTShDQVNFIFdIRU4gdG9hLmFzc2lnbm1lbnRfdHlwZSA9ICdkZWxpdmVyeScgVEhFTiBvZi50b3RhbF9mb290YWdlIEVMU0UgMCBFTkQpLCAwKSBhcyBkZWxpdmVyeV9mb290YWdlLFxuICAgICAgICBDT0FMRVNDRShTVU0oQ0FTRSBXSEVOIHRvYS5hc3NpZ25tZW50X3R5cGUgPSAndHJhbnNmZXInIFRIRU4gb2YudG90YWxfZm9vdGFnZSBFTFNFIDAgRU5EKSwgMCkgYXMgdHJhbnNmZXJfZm9vdGFnZVxuICAgICAgRlJPTSB0cnVja2xvYWRzIHRcbiAgICAgIExFRlQgSk9JTiBkcml2ZXJzIGQgT04gdC5kcml2ZXJfaWQgPSBkLnVzZXJfaWRcbiAgICAgIExFRlQgSk9JTiB1c2VycyB1IE9OIGQudXNlcl9pZCA9IHUuaWRcbiAgICAgIExFRlQgSk9JTiB0cnVja2xvYWRfb3JkZXJfYXNzaWdubWVudHMgdG9hIE9OIHQuaWQgPSB0b2EudHJ1Y2tsb2FkX2lkXG4gICAgICBMRUZUIEpPSU4gb3JkZXJfZnJlaWdodCBvZiBPTiB0b2Eub3JkZXJfaWQgPSBvZi5vcmRlcl9pZFxuICAgICAgR1JPVVAgQlkgdC5pZCwgdC5kcml2ZXJfaWQsIHQuc3RhcnRfZGF0ZSwgdC5lbmRfZGF0ZSwgdC50cmFpbGVyX251bWJlciwgdC5iaWxsX29mX2xhZGluZ19udW1iZXIsIFxuICAgICAgICAgICAgICAgdC5kZXNjcmlwdGlvbiwgdC5pc19jb21wbGV0ZWQsIHQudG90YWxfbWlsZWFnZSwgdC5lc3RpbWF0ZWRfZHVyYXRpb24sIHUuZnVsbF9uYW1lLCBkLmNvbG9yXG4gICAgICBPUkRFUiBCWSB0LnN0YXJ0X2RhdGUgREVTQ1xuICAgIGApXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRydWNrbG9hZHM6IHJlc3VsdC5yb3dzXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0cnVja2xvYWRzOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHRydWNrbG9hZHMnXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbi8vIFBPU1QgL2FwaS90cnVja2xvYWRzIC0gQ3JlYXRlIGEgbmV3IHRydWNrbG9hZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgXG4gIGlmICghc2Vzc2lvbj8udXNlcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJ1xuICAgIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldENsaWVudCgpXG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHsgZHJpdmVySWQsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdHJhaWxlck51bWJlciwgZGVzY3JpcHRpb24gfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIWRyaXZlcklkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdEcml2ZXIgaXMgcmVxdWlyZWQnXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgaWYgKCFzdGFydERhdGUgfHwgIWVuZERhdGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ1N0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIGFyZSByZXF1aXJlZCdcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyBTdGFydCBhIHRyYW5zYWN0aW9uXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdCRUdJTicpXG5cbiAgICB0cnkge1xuICAgICAgLy8gSW5zZXJ0IGludG8gdHJ1Y2tsb2FkcyB0YWJsZVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgICBgSU5TRVJUIElOVE8gdHJ1Y2tsb2FkcyAoXG4gICAgICAgICAgZHJpdmVyX2lkLFxuICAgICAgICAgIHN0YXJ0X2RhdGUsXG4gICAgICAgICAgZW5kX2RhdGUsXG4gICAgICAgICAgdHJhaWxlcl9udW1iZXIsXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgY3JlYXRlZF9ieVxuICAgICAgICApXG4gICAgICAgIFZBTFVFUyAoJDEsICQyLCAkMywgJDQsICQ1LCAkNilcbiAgICAgICAgUkVUVVJOSU5HIGlkYCxcbiAgICAgICAgW1xuICAgICAgICAgIGRyaXZlcklkLFxuICAgICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgICBlbmREYXRlLFxuICAgICAgICAgIHRyYWlsZXJOdW1iZXIgfHwgbnVsbCxcbiAgICAgICAgICBkZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuaWRcbiAgICAgICAgXVxuICAgICAgKVxuXG4gICAgICBhd2FpdCBjbGllbnQucXVlcnkoJ0NPTU1JVCcpXG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRydWNrbG9hZElkOiByZXN1bHQucm93c1swXS5pZCxcbiAgICAgICAgbWVzc2FnZTogJ1RydWNrbG9hZCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnUk9MTEJBQ0snKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB0cnVja2xvYWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHRydWNrbG9hZCdcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInF1ZXJ5IiwiZ2V0Q2xpZW50IiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiR0VUIiwicmVzdWx0IiwianNvbiIsInN1Y2Nlc3MiLCJ0cnVja2xvYWRzIiwicm93cyIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsIlBPU1QiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJjbGllbnQiLCJkcml2ZXJJZCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJ0cmFpbGVyTnVtYmVyIiwiZGVzY3JpcHRpb24iLCJpZCIsInRydWNrbG9hZElkIiwibWVzc2FnZSIsInJlbGVhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/truckloads/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getSession: () => (/* binding */ getSession)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"Credentials\",\n            credentials: {\n                username: {\n                    label: \"Username\",\n                    type: \"text\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.username || !credentials?.password) {\n                    return null;\n                }\n                try {\n                    // Find user by username\n                    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT id, username, password_hash, full_name, role FROM users WHERE username = $1 AND is_active = true\", [\n                        credentials.username\n                    ]);\n                    const user = result.rows[0];\n                    if (!user) {\n                        return null;\n                    }\n                    // Verify password\n                    const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_2___default().compare(credentials.password, user.password_hash);\n                    if (!isValid) {\n                        return null;\n                    }\n                    // Return user data (excluding password)\n                    return {\n                        id: user.id,\n                        username: user.username,\n                        name: user.full_name,\n                        role: user.role\n                    };\n                } catch (error) {\n                    console.error(\"Error in auth:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 24 * 60 * 60\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    }\n};\n// Basic auth helper for development\nasync function getSession() {\n    // TODO: Implement proper authentication\n    return {\n        user: {\n            id: 1,\n            name: \"Development User\",\n            email: \"dev@example.com\"\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDa0U7QUFDakM7QUFDSDtBQUV2QixNQUFNRyxjQUErQjtJQUMxQ0MsV0FBVztRQUNUSiwyRUFBbUJBLENBQUM7WUFDbEJLLE1BQU07WUFDTkMsYUFBYTtnQkFDWEMsVUFBVTtvQkFBRUMsT0FBTztvQkFBWUMsTUFBTTtnQkFBTztnQkFDNUNDLFVBQVU7b0JBQUVGLE9BQU87b0JBQVlDLE1BQU07Z0JBQVc7WUFDbEQ7WUFDQSxNQUFNRSxXQUFVTCxXQUFXO2dCQUN6QixJQUFJLENBQUNBLGFBQWFDLFlBQVksQ0FBQ0QsYUFBYUksVUFBVTtvQkFDcEQsT0FBTztnQkFDVDtnQkFFQSxJQUFJO29CQUNGLHdCQUF3QjtvQkFDeEIsTUFBTUUsU0FBUyxNQUFNWCw4Q0FBS0EsQ0FDeEIsMkdBQ0E7d0JBQUNLLFlBQVlDLFFBQVE7cUJBQUM7b0JBR3hCLE1BQU1NLE9BQU9ELE9BQU9FLElBQUksQ0FBQyxFQUFFO29CQUUzQixJQUFJLENBQUNELE1BQU07d0JBQ1QsT0FBTztvQkFDVDtvQkFFQSxrQkFBa0I7b0JBQ2xCLE1BQU1FLFVBQVUsTUFBTWIsdURBQWMsQ0FBQ0ksWUFBWUksUUFBUSxFQUFFRyxLQUFLSSxhQUFhO29CQUU3RSxJQUFJLENBQUNGLFNBQVM7d0JBQ1osT0FBTztvQkFDVDtvQkFFQSx3Q0FBd0M7b0JBQ3hDLE9BQU87d0JBQ0xHLElBQUlMLEtBQUtLLEVBQUU7d0JBQ1hYLFVBQVVNLEtBQUtOLFFBQVE7d0JBQ3ZCRixNQUFNUSxLQUFLTSxTQUFTO3dCQUNwQkMsTUFBTVAsS0FBS08sSUFBSTtvQkFDakI7Z0JBQ0YsRUFBRSxPQUFPQyxPQUFPO29CQUNkQyxRQUFRRCxLQUFLLENBQUMsa0JBQWtCQTtvQkFDaEMsT0FBTztnQkFDVDtZQUNGO1FBQ0Y7S0FDRDtJQUNERSxTQUFTO1FBQ1BDLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUs7SUFDcEI7SUFDQUMsV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsS0FBSyxFQUFFZixJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUmUsTUFBTVYsRUFBRSxHQUFHTCxLQUFLSyxFQUFFO2dCQUNsQlUsTUFBTVIsSUFBSSxHQUFHUCxLQUFLTyxJQUFJO1lBQ3hCO1lBQ0EsT0FBT1E7UUFDVDtRQUNBLE1BQU1MLFNBQVEsRUFBRUEsT0FBTyxFQUFFSyxLQUFLLEVBQUU7WUFDOUIsSUFBSUEsT0FBTztnQkFDVEwsUUFBUVYsSUFBSSxDQUFDSyxFQUFFLEdBQUdVLE1BQU1WLEVBQUU7Z0JBQzFCSyxRQUFRVixJQUFJLENBQUNPLElBQUksR0FBR1EsTUFBTVIsSUFBSTtZQUNoQztZQUNBLE9BQU9HO1FBQ1Q7SUFDRjtJQUNBTSxPQUFPO1FBQ0xDLFFBQVE7UUFDUlQsT0FBTztJQUNUO0FBQ0YsRUFBRTtBQUVGLG9DQUFvQztBQUM3QixlQUFlVTtJQUNwQix3Q0FBd0M7SUFDeEMsT0FBTztRQUNMbEIsTUFBTTtZQUNKSyxJQUFJO1lBQ0piLE1BQU07WUFDTjJCLE9BQU87UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aW1iZXJsaW5lLWxvZ2lzdGljcy1kYXNoYm9hcmQvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gJ25leHQtYXV0aCc7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IHF1ZXJ5IH0gZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBwcm92aWRlcnM6IFtcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6ICdDcmVkZW50aWFscycsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICB1c2VybmFtZTogeyBsYWJlbDogXCJVc2VybmFtZVwiLCB0eXBlOiBcInRleHRcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy51c2VybmFtZSB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEZpbmQgdXNlciBieSB1c2VybmFtZVxuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KFxuICAgICAgICAgICAgJ1NFTEVDVCBpZCwgdXNlcm5hbWUsIHBhc3N3b3JkX2hhc2gsIGZ1bGxfbmFtZSwgcm9sZSBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gJDEgQU5EIGlzX2FjdGl2ZSA9IHRydWUnLFxuICAgICAgICAgICAgW2NyZWRlbnRpYWxzLnVzZXJuYW1lXVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCB1c2VyID0gcmVzdWx0LnJvd3NbMF07XG5cbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFZlcmlmeSBwYXNzd29yZFxuICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcblxuICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmV0dXJuIHVzZXIgZGF0YSAoZXhjbHVkaW5nIHBhc3N3b3JkKVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgbmFtZTogdXNlci5mdWxsX25hbWUsXG4gICAgICAgICAgICByb2xlOiB1c2VyLnJvbGVcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGF1dGg6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgXSxcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiAnand0JyxcbiAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCwgLy8gMjQgaG91cnNcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgand0KHsgdG9rZW4sIHVzZXIgfSkge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkO1xuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogJy9hdXRoL3NpZ25pbicsXG4gICAgZXJyb3I6ICcvYXV0aC9lcnJvcicsXG4gIH1cbn07XG5cbi8vIEJhc2ljIGF1dGggaGVscGVyIGZvciBkZXZlbG9wbWVudFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oKSB7XG4gIC8vIFRPRE86IEltcGxlbWVudCBwcm9wZXIgYXV0aGVudGljYXRpb25cbiAgcmV0dXJuIHtcbiAgICB1c2VyOiB7XG4gICAgICBpZDogMSxcbiAgICAgIG5hbWU6ICdEZXZlbG9wbWVudCBVc2VyJyxcbiAgICAgIGVtYWlsOiAnZGV2QGV4YW1wbGUuY29tJ1xuICAgIH1cbiAgfTtcbn0gIl0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJxdWVyeSIsImJjcnlwdCIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwidXNlcm5hbWUiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInJlc3VsdCIsInVzZXIiLCJyb3dzIiwiaXNWYWxpZCIsImNvbXBhcmUiLCJwYXNzd29yZF9oYXNoIiwiaWQiLCJmdWxsX25hbWUiLCJyb2xlIiwiZXJyb3IiLCJjb25zb2xlIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJwYWdlcyIsInNpZ25JbiIsImdldFNlc3Npb24iLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDatabaseConnection: () => (/* binding */ checkDatabaseConnection),\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   dbQuery: () => (/* binding */ dbQuery),\n/* harmony export */   getClient: () => (/* reexport safe */ _db_index__WEBPACK_IMPORTED_MODULE_1__.getClient),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   query: () => (/* reexport safe */ _db_index__WEBPACK_IMPORTED_MODULE_1__.query),\n/* harmony export */   sql: () => (/* reexport safe */ _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql),\n/* harmony export */   withTransaction: () => (/* reexport safe */ _db_index__WEBPACK_IMPORTED_MODULE_1__.withTransaction)\n/* harmony export */ });\n/* harmony import */ var _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/postgres */ \"(rsc)/./node_modules/@vercel/postgres/dist/index-node.js\");\n/* harmony import */ var _db_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db/index */ \"(rsc)/./lib/db/index.ts\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nlet pool = null;\n// Parse connection string to explicit config\nfunction parseConnectionString(connectionString) {\n    try {\n        const url = new URL(connectionString);\n        return {\n            user: url.username,\n            password: url.password,\n            host: url.hostname,\n            port: Number(url.port) || 5432,\n            database: url.pathname.slice(1),\n            ssl: true\n        };\n    } catch (error) {\n        console.error(\"Error parsing connection string:\", error);\n        throw error;\n    }\n}\n// Database configuration\nconst config = {\n    preview: parseConnectionString(\"postgresql://neondb_owner:npg_D5hj1egPlAok@ep-proud-glitter-a85pbrz6-pooler.eastus2.azure.neon.tech/neondb?sslmode=require\"),\n    main: parseConnectionString(\"postgresql://neondb_owner:npg_D5hj1egPlAok@ep-calm-frog-a8qxyo8o-pooler.eastus2.azure.neon.tech/neondb?sslmode=require\")\n};\n// Determine which database branch to use based on environment\nconst isProduction = \"development\" === \"production\";\nconst branch = isProduction ? \"main\" : \"preview\";\nfunction getPool() {\n    if (!pool) {\n        const branchConfig = config[branch];\n        pool = new pg__WEBPACK_IMPORTED_MODULE_2__.Pool({\n            ...branchConfig,\n            ssl: {\n                rejectUnauthorized: true\n            }\n        });\n        // Handle pool errors\n        pool.on(\"error\", (err)=>{\n            console.error(\"Unexpected error on idle client\", err);\n            // Reset pool on error\n            pool = null;\n        });\n        // Add connection logging\n        pool.on(\"connect\", ()=>{\n            console.log(\"New database connection established\");\n        });\n        pool.on(\"acquire\", ()=>{\n            console.log(\"Client acquired from pool\");\n        });\n        pool.on(\"remove\", ()=>{\n            console.log(\"Client removed from pool\");\n        });\n    }\n    return pool;\n}\nasync function dbQuery(text, params) {\n    const pool = getPool();\n    const client = await pool.connect();\n    try {\n        return await client.query(text, params);\n    } finally{\n        client.release();\n    }\n}\n// Clean up function for tests\nasync function closePool() {\n    if (pool) {\n        await pool.end();\n        pool = null;\n    }\n}\n// Helper function to check database connection\nasync function checkDatabaseConnection() {\n    try {\n        await _vercel_postgres__WEBPACK_IMPORTED_MODULE_0__.sql`SELECT 1`;\n        return true;\n    } catch (error) {\n        console.error(\"Database connection error:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBQ3dCO0FBQ3JDO0FBRXdCO0FBRWpELElBQUlLLE9BQW9CO0FBRXhCLDZDQUE2QztBQUM3QyxTQUFTQyxzQkFBc0JDLGdCQUF3QjtJQUNyRCxJQUFJO1FBQ0YsTUFBTUMsTUFBTSxJQUFJQyxJQUFJRjtRQUNwQixPQUFPO1lBQ0xHLE1BQU1GLElBQUlHLFFBQVE7WUFDbEJDLFVBQVVKLElBQUlJLFFBQVE7WUFDdEJDLE1BQU1MLElBQUlNLFFBQVE7WUFDbEJDLE1BQU1DLE9BQU9SLElBQUlPLElBQUksS0FBSztZQUMxQkUsVUFBVVQsSUFBSVUsUUFBUSxDQUFDQyxLQUFLLENBQUM7WUFDN0JDLEtBQUs7UUFDUDtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSx5QkFBeUI7QUFDekIsTUFBTUUsU0FBUztJQUNiQyxTQUFTbEIsc0JBQXNCO0lBQy9CbUIsTUFBTW5CLHNCQUFzQjtBQUM5QjtBQUVBLDhEQUE4RDtBQUM5RCxNQUFNb0IsZUFBZUMsa0JBQXlCO0FBQzlDLE1BQU1DLFNBQVNGLGVBQWUsU0FBUztBQUVoQyxTQUFTRztJQUNkLElBQUksQ0FBQ3hCLE1BQU07UUFDVCxNQUFNeUIsZUFBZVAsTUFBTSxDQUFDSyxPQUFPO1FBQ25DdkIsT0FBTyxJQUFJRCxvQ0FBSUEsQ0FBQztZQUNkLEdBQUcwQixZQUFZO1lBQ2ZWLEtBQUs7Z0JBQ0hXLG9CQUFvQjtZQUN0QjtRQUNGO1FBRUEscUJBQXFCO1FBQ3JCMUIsS0FBSzJCLEVBQUUsQ0FBQyxTQUFTLENBQUNDO1lBQ2hCWCxRQUFRRCxLQUFLLENBQUMsbUNBQW1DWTtZQUNqRCxzQkFBc0I7WUFDdEI1QixPQUFPO1FBQ1Q7UUFFQSx5QkFBeUI7UUFDekJBLEtBQUsyQixFQUFFLENBQUMsV0FBVztZQUNqQlYsUUFBUVksR0FBRyxDQUFDO1FBQ2Q7UUFFQTdCLEtBQUsyQixFQUFFLENBQUMsV0FBVztZQUNqQlYsUUFBUVksR0FBRyxDQUFDO1FBQ2Q7UUFFQTdCLEtBQUsyQixFQUFFLENBQUMsVUFBVTtZQUNoQlYsUUFBUVksR0FBRyxDQUFDO1FBQ2Q7SUFDRjtJQUNBLE9BQU83QjtBQUNUO0FBRU8sZUFBZThCLFFBQVFDLElBQVksRUFBRUMsTUFBYztJQUN4RCxNQUFNaEMsT0FBT3dCO0lBQ2IsTUFBTVMsU0FBUyxNQUFNakMsS0FBS2tDLE9BQU87SUFDakMsSUFBSTtRQUNGLE9BQU8sTUFBTUQsT0FBT3JDLEtBQUssQ0FBQ21DLE1BQU1DO0lBQ2xDLFNBQVU7UUFDUkMsT0FBT0UsT0FBTztJQUNoQjtBQUNGO0FBRUEsOEJBQThCO0FBQ3ZCLGVBQWVDO0lBQ3BCLElBQUlwQyxNQUFNO1FBQ1IsTUFBTUEsS0FBS3FDLEdBQUc7UUFDZHJDLE9BQU87SUFDVDtBQUNGO0FBRUEsK0NBQStDO0FBQ3hDLGVBQWVzQztJQUNwQixJQUFJO1FBQ0YsTUFBTTNDLGlEQUFHLENBQUMsUUFBUSxDQUFDO1FBQ25CLE9BQU87SUFDVCxFQUFFLE9BQU9xQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGltYmVybGluZS1sb2dpc3RpY3MtZGFzaGJvYXJkLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3FsIH0gZnJvbSAnQHZlcmNlbC9wb3N0Z3JlcydcbmltcG9ydCB7IHF1ZXJ5LCBnZXRDbGllbnQsIHdpdGhUcmFuc2FjdGlvbiB9IGZyb20gJy4vZGIvaW5kZXgnXG5pbXBvcnQgeyBQb29sIH0gZnJvbSAncGcnXG5cbmV4cG9ydCB7IHNxbCwgcXVlcnksIGdldENsaWVudCwgd2l0aFRyYW5zYWN0aW9uIH1cblxubGV0IHBvb2w6IFBvb2wgfCBudWxsID0gbnVsbFxuXG4vLyBQYXJzZSBjb25uZWN0aW9uIHN0cmluZyB0byBleHBsaWNpdCBjb25maWdcbmZ1bmN0aW9uIHBhcnNlQ29ubmVjdGlvblN0cmluZyhjb25uZWN0aW9uU3RyaW5nOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGNvbm5lY3Rpb25TdHJpbmcpXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHVybC51c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkOiB1cmwucGFzc3dvcmQsXG4gICAgICBob3N0OiB1cmwuaG9zdG5hbWUsXG4gICAgICBwb3J0OiBOdW1iZXIodXJsLnBvcnQpIHx8IDU0MzIsXG4gICAgICBkYXRhYmFzZTogdXJsLnBhdGhuYW1lLnNsaWNlKDEpLFxuICAgICAgc3NsOiB0cnVlXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgY29ubmVjdGlvbiBzdHJpbmc6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBEYXRhYmFzZSBjb25maWd1cmF0aW9uXG5jb25zdCBjb25maWcgPSB7XG4gIHByZXZpZXc6IHBhcnNlQ29ubmVjdGlvblN0cmluZyhcInBvc3RncmVzcWw6Ly9uZW9uZGJfb3duZXI6bnBnX0Q1aGoxZWdQbEFva0BlcC1wcm91ZC1nbGl0dGVyLWE4NXBicno2LXBvb2xlci5lYXN0dXMyLmF6dXJlLm5lb24udGVjaC9uZW9uZGI/c3NsbW9kZT1yZXF1aXJlXCIpLFxuICBtYWluOiBwYXJzZUNvbm5lY3Rpb25TdHJpbmcoXCJwb3N0Z3Jlc3FsOi8vbmVvbmRiX293bmVyOm5wZ19ENWhqMWVnUGxBb2tAZXAtY2FsbS1mcm9nLWE4cXh5bzhvLXBvb2xlci5lYXN0dXMyLmF6dXJlLm5lb24udGVjaC9uZW9uZGI/c3NsbW9kZT1yZXF1aXJlXCIpXG59XG5cbi8vIERldGVybWluZSB3aGljaCBkYXRhYmFzZSBicmFuY2ggdG8gdXNlIGJhc2VkIG9uIGVudmlyb25tZW50XG5jb25zdCBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG5jb25zdCBicmFuY2ggPSBpc1Byb2R1Y3Rpb24gPyAnbWFpbicgOiAncHJldmlldydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvb2woKSB7XG4gIGlmICghcG9vbCkge1xuICAgIGNvbnN0IGJyYW5jaENvbmZpZyA9IGNvbmZpZ1ticmFuY2hdXG4gICAgcG9vbCA9IG5ldyBQb29sKHtcbiAgICAgIC4uLmJyYW5jaENvbmZpZyxcbiAgICAgIHNzbDoge1xuICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gSGFuZGxlIHBvb2wgZXJyb3JzXG4gICAgcG9vbC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIG9uIGlkbGUgY2xpZW50JywgZXJyKVxuICAgICAgLy8gUmVzZXQgcG9vbCBvbiBlcnJvclxuICAgICAgcG9vbCA9IG51bGxcbiAgICB9KVxuXG4gICAgLy8gQWRkIGNvbm5lY3Rpb24gbG9nZ2luZ1xuICAgIHBvb2wub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTmV3IGRhdGFiYXNlIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKVxuICAgIH0pXG5cbiAgICBwb29sLm9uKCdhY3F1aXJlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsaWVudCBhY3F1aXJlZCBmcm9tIHBvb2wnKVxuICAgIH0pXG5cbiAgICBwb29sLm9uKCdyZW1vdmUnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xpZW50IHJlbW92ZWQgZnJvbSBwb29sJylcbiAgICB9KVxuICB9XG4gIHJldHVybiBwb29sXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkYlF1ZXJ5KHRleHQ6IHN0cmluZywgcGFyYW1zPzogYW55W10pIHtcbiAgY29uc3QgcG9vbCA9IGdldFBvb2woKVxuICBjb25zdCBjbGllbnQgPSBhd2FpdCBwb29sLmNvbm5lY3QoKVxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBjbGllbnQucXVlcnkodGV4dCwgcGFyYW1zKVxuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKClcbiAgfVxufVxuXG4vLyBDbGVhbiB1cCBmdW5jdGlvbiBmb3IgdGVzdHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZVBvb2woKSB7XG4gIGlmIChwb29sKSB7XG4gICAgYXdhaXQgcG9vbC5lbmQoKVxuICAgIHBvb2wgPSBudWxsXG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGRhdGFiYXNlIGNvbm5lY3Rpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzcWxgU0VMRUNUIDFgXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59ICJdLCJuYW1lcyI6WyJzcWwiLCJxdWVyeSIsImdldENsaWVudCIsIndpdGhUcmFuc2FjdGlvbiIsIlBvb2wiLCJwb29sIiwicGFyc2VDb25uZWN0aW9uU3RyaW5nIiwiY29ubmVjdGlvblN0cmluZyIsInVybCIsIlVSTCIsInVzZXIiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiaG9zdCIsImhvc3RuYW1lIiwicG9ydCIsIk51bWJlciIsImRhdGFiYXNlIiwicGF0aG5hbWUiLCJzbGljZSIsInNzbCIsImVycm9yIiwiY29uc29sZSIsImNvbmZpZyIsInByZXZpZXciLCJtYWluIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImJyYW5jaCIsImdldFBvb2wiLCJicmFuY2hDb25maWciLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJvbiIsImVyciIsImxvZyIsImRiUXVlcnkiLCJ0ZXh0IiwicGFyYW1zIiwiY2xpZW50IiwiY29ubmVjdCIsInJlbGVhc2UiLCJjbG9zZVBvb2wiLCJlbmQiLCJjaGVja0RhdGFiYXNlQ29ubmVjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db/index.ts":
/*!*************************!*\
  !*** ./lib/db/index.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClient: () => (/* binding */ getClient),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n\n// Parse connection string to explicit config\nfunction parseConnectionString(connectionString) {\n    try {\n        const url = new URL(connectionString);\n        return {\n            user: url.username,\n            password: url.password,\n            host: url.hostname,\n            port: Number(url.port) || 5432,\n            database: url.pathname.slice(1),\n            ssl: true\n        };\n    } catch (error) {\n        console.error(\"Error parsing connection string:\", error);\n        throw error;\n    }\n}\n// Database configuration\nconst config = {\n    preview: parseConnectionString(\"postgresql://neondb_owner:npg_D5hj1egPlAok@ep-proud-glitter-a85pbrz6-pooler.eastus2.azure.neon.tech/neondb?sslmode=require\"),\n    main: parseConnectionString(\"postgresql://neondb_owner:npg_D5hj1egPlAok@ep-calm-frog-a8qxyo8o-pooler.eastus2.azure.neon.tech/neondb?sslmode=require\")\n};\n// Determine which database branch to use based on environment\nconst isProduction = \"development\" === \"production\";\nconst branch = isProduction ? \"main\" : \"preview\";\nconsole.log(`Using database branch: ${branch}`);\nconsole.log(\"Database config:\", {\n    host: config[branch].host,\n    port: config[branch].port,\n    database: config[branch].database,\n    user: config[branch].user,\n    // password is masked for security\n    ssl: config[branch].ssl\n});\n// Connection pool settings\nconst CONNECTION_TIMEOUT_MS = 10000;\nconst IDLE_TIMEOUT_MS = 30000;\nconst MAX_POOL_SIZE = 20;\nconst CONNECTION_RETRY_ATTEMPTS = 3;\nconst CONNECTION_RETRY_DELAY_MS = 1000;\n// Create a connection pool with enhanced settings\nlet pool = null;\n// Migration SQL\nconst MIGRATIONS = [\n    `\n  -- Fix stack columns in trailer_layout_items\n  ALTER TABLE trailer_layout_items\n  DROP CONSTRAINT IF EXISTS fk_trailer_layout_items_stack;\n\n  ALTER TABLE trailer_layout_items\n  DROP CONSTRAINT IF EXISTS check_stack_position;\n\n  ALTER TABLE trailer_layout_items\n  DROP CONSTRAINT IF EXISTS check_stack_id_vinyl;\n\n  -- Ensure the columns exist with correct types\n  ALTER TABLE trailer_layout_items\n  DROP COLUMN IF EXISTS stack_id;\n\n  ALTER TABLE trailer_layout_items\n  DROP COLUMN IF EXISTS stack_position;\n\n  ALTER TABLE trailer_layout_items\n  ADD COLUMN stack_id INTEGER,\n  ADD COLUMN stack_position INTEGER;\n\n  -- Add index for stack-related queries\n  DROP INDEX IF EXISTS idx_layout_items_stack;\n  CREATE INDEX idx_layout_items_stack ON trailer_layout_items(stack_id, stack_position);\n\n  -- Add constraint to ensure stack_position is positive when present\n  ALTER TABLE trailer_layout_items\n  ADD CONSTRAINT check_stack_position \n  CHECK (stack_position IS NULL OR stack_position > 0);\n\n  -- Add constraint to ensure stack_id and stack_position are used together\n  ALTER TABLE trailer_layout_items\n  ADD CONSTRAINT check_stack_consistency\n  CHECK (\n      (stack_id IS NULL AND stack_position IS NULL) OR\n      (stack_id IS NOT NULL AND stack_position IS NOT NULL)\n  );\n  `\n];\nasync function runMigrations(pool) {\n    try {\n        console.log(\"Running database migrations...\");\n        for (const migration of MIGRATIONS){\n            await pool.query(migration);\n        }\n        console.log(\"Database migrations completed successfully\");\n    } catch (error) {\n        console.error(\"Error running migrations:\", error);\n        throw error;\n    }\n}\nfunction createPool() {\n    if (pool) return pool;\n    try {\n        const branchConfig = config[branch];\n        if (!branchConfig) {\n            throw new Error(`No configuration found for branch: ${branch}`);\n        }\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            ...branchConfig,\n            connectionTimeoutMillis: CONNECTION_TIMEOUT_MS,\n            idleTimeoutMillis: IDLE_TIMEOUT_MS,\n            max: MAX_POOL_SIZE,\n            // Force SSL mode\n            ssl: {\n                rejectUnauthorized: true\n            }\n        });\n        // Handle pool errors\n        pool.on(\"error\", (err)=>{\n            console.error(\"Unexpected error on idle client\", err);\n            // Reset pool on error\n            pool = null;\n        });\n        // Add connection logging\n        pool.on(\"connect\", ()=>{\n            console.log(\"New database connection established\");\n        });\n        pool.on(\"acquire\", ()=>{\n            console.log(\"Client acquired from pool\");\n        });\n        pool.on(\"remove\", ()=>{\n            console.log(\"Client removed from pool\");\n        });\n        // Run migrations\n        runMigrations(pool).catch((error)=>{\n            console.error(\"Failed to run migrations:\", error);\n            pool = null;\n            throw error;\n        });\n        return pool;\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        console.error(`Error initializing database pool for ${branch} branch:`, errorMessage);\n        throw new Error(`Database connection error: ${errorMessage}`);\n    }\n}\n/**\n * Execute a SQL query on the database with retry logic\n */ async function query(text, params = [], retryCount = 0) {\n    const MAX_RETRIES = 2;\n    const start = Date.now();\n    try {\n        const currentPool = createPool();\n        if (!currentPool) {\n            throw new Error(\"Database pool not initialized\");\n        }\n        const res = await currentPool.query(text, params);\n        const duration = Date.now() - start;\n        // Only log if query took longer than 100ms for performance monitoring\n        if (duration > 100) {\n            console.log(\"Slow query detected\", {\n                text: text.substring(0, 50) + (text.length > 50 ? \"...\" : \"\"),\n                duration,\n                rows: res.rowCount\n            });\n        }\n        return res;\n    } catch (error) {\n        const duration = Date.now() - start;\n        // Retry on connection errors, but not on syntax or constraint errors\n        const isConnectionError = error.code === \"ECONNREFUSED\" || error.code === \"ETIMEDOUT\" || error.code === \"08006\" || // connection_failure\n        error.code === \"08001\"; // unable_to_connect\n        if (isConnectionError && retryCount < MAX_RETRIES) {\n            console.warn(`Database connection error, retrying (${retryCount + 1}/${MAX_RETRIES})...`);\n            // Reset pool on connection error\n            pool = null;\n            // Exponential backoff\n            const delay = Math.pow(2, retryCount) * 500;\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n            return query(text, params, retryCount + 1);\n        }\n        console.error(\"Error executing query\", {\n            text: text.substring(0, 100),\n            error: error.message,\n            duration,\n            code: error.code,\n            detail: error.detail,\n            hint: error.hint,\n            position: error.position\n        });\n        throw error;\n    }\n}\n/**\n * Get a client from the pool for transactions\n */ async function getClient() {\n    const currentPool = createPool();\n    if (!currentPool) {\n        throw new Error(\"Database pool not initialized\");\n    }\n    try {\n        const client = await currentPool.connect();\n        return client;\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        console.error(\"Error getting database client:\", errorMessage);\n        throw new Error(`Failed to get database client: ${errorMessage}`);\n    }\n}\n/**\n * Convenient wrapper for transactions\n */ async function withTransaction(callback) {\n    const currentPool = createPool();\n    if (!currentPool) {\n        throw new Error(\"Database pool not initialized\");\n    }\n    const client = await currentPool.connect();\n    try {\n        await client.query(\"BEGIN\");\n        const result = await callback(client);\n        await client.query(\"COMMIT\");\n        return result;\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"Transaction error:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFyQixNQUFNOEIsT0FBTyxHQUFHQyxPQUFPL0I7UUFDckVDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0M2QjtRQUNoRCxNQUFNLElBQUlSLE1BQU0sQ0FBQywrQkFBK0IsRUFBRVEsYUFBYSxDQUFDO0lBQ2xFO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVnQyxnQkFBbUJDLFFBQXFDO0lBQzVFLE1BQU12QixjQUFjcEI7SUFDcEIsSUFBSSxDQUFDb0IsYUFBYTtRQUNoQixNQUFNLElBQUlsQixNQUFNO0lBQ2xCO0lBRUEsTUFBTXNDLFNBQVMsTUFBTXBCLFlBQVlxQixPQUFPO0lBRXhDLElBQUk7UUFDRixNQUFNRCxPQUFPekMsS0FBSyxDQUFDO1FBQ25CLE1BQU02QyxTQUFTLE1BQU1ELFNBQVNIO1FBQzlCLE1BQU1BLE9BQU96QyxLQUFLLENBQUM7UUFDbkIsT0FBTzZDO0lBQ1QsRUFBRSxPQUFPL0QsT0FBTztRQUNkLE1BQU0yRCxPQUFPekMsS0FBSyxDQUFDO1FBQ25CakIsUUFBUUQsS0FBSyxDQUFDLHNCQUFzQkE7UUFDcEMsTUFBTUE7SUFDUixTQUFVO1FBQ1IyRCxPQUFPSyxPQUFPO0lBQ2hCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90aW1iZXJsaW5lLWxvZ2lzdGljcy1kYXNoYm9hcmQvLi9saWIvZGIvaW5kZXgudHM/NmY5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sIH0gZnJvbSAncGcnXG5cbi8vIFBhcnNlIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGV4cGxpY2l0IGNvbmZpZ1xuZnVuY3Rpb24gcGFyc2VDb25uZWN0aW9uU3RyaW5nKGNvbm5lY3Rpb25TdHJpbmc6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoY29ubmVjdGlvblN0cmluZylcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcjogdXJsLnVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQ6IHVybC5wYXNzd29yZCxcbiAgICAgIGhvc3Q6IHVybC5ob3N0bmFtZSxcbiAgICAgIHBvcnQ6IE51bWJlcih1cmwucG9ydCkgfHwgNTQzMixcbiAgICAgIGRhdGFiYXNlOiB1cmwucGF0aG5hbWUuc2xpY2UoMSksXG4gICAgICBzc2w6IHRydWVcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBjb25uZWN0aW9uIHN0cmluZzonLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIERhdGFiYXNlIGNvbmZpZ3VyYXRpb25cbmNvbnN0IGNvbmZpZyA9IHtcbiAgcHJldmlldzogcGFyc2VDb25uZWN0aW9uU3RyaW5nKFwicG9zdGdyZXNxbDovL25lb25kYl9vd25lcjpucGdfRDVoajFlZ1BsQW9rQGVwLXByb3VkLWdsaXR0ZXItYTg1cGJyejYtcG9vbGVyLmVhc3R1czIuYXp1cmUubmVvbi50ZWNoL25lb25kYj9zc2xtb2RlPXJlcXVpcmVcIiksXG4gIG1haW46IHBhcnNlQ29ubmVjdGlvblN0cmluZyhcInBvc3RncmVzcWw6Ly9uZW9uZGJfb3duZXI6bnBnX0Q1aGoxZWdQbEFva0BlcC1jYWxtLWZyb2ctYThxeHlvOG8tcG9vbGVyLmVhc3R1czIuYXp1cmUubmVvbi50ZWNoL25lb25kYj9zc2xtb2RlPXJlcXVpcmVcIilcbn1cblxuLy8gRGV0ZXJtaW5lIHdoaWNoIGRhdGFiYXNlIGJyYW5jaCB0byB1c2UgYmFzZWQgb24gZW52aXJvbm1lbnRcbmNvbnN0IGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcbmNvbnN0IGJyYW5jaCA9IGlzUHJvZHVjdGlvbiA/ICdtYWluJyA6ICdwcmV2aWV3J1xuXG5jb25zb2xlLmxvZyhgVXNpbmcgZGF0YWJhc2UgYnJhbmNoOiAke2JyYW5jaH1gKTtcbmNvbnNvbGUubG9nKCdEYXRhYmFzZSBjb25maWc6Jywge1xuICBob3N0OiBjb25maWdbYnJhbmNoXS5ob3N0LFxuICBwb3J0OiBjb25maWdbYnJhbmNoXS5wb3J0LFxuICBkYXRhYmFzZTogY29uZmlnW2JyYW5jaF0uZGF0YWJhc2UsXG4gIHVzZXI6IGNvbmZpZ1ticmFuY2hdLnVzZXIsXG4gIC8vIHBhc3N3b3JkIGlzIG1hc2tlZCBmb3Igc2VjdXJpdHlcbiAgc3NsOiBjb25maWdbYnJhbmNoXS5zc2xcbn0pO1xuXG4vLyBDb25uZWN0aW9uIHBvb2wgc2V0dGluZ3NcbmNvbnN0IENPTk5FQ1RJT05fVElNRU9VVF9NUyA9IDEwMDAwXG5jb25zdCBJRExFX1RJTUVPVVRfTVMgPSAzMDAwMFxuY29uc3QgTUFYX1BPT0xfU0laRSA9IDIwXG5jb25zdCBDT05ORUNUSU9OX1JFVFJZX0FUVEVNUFRTID0gM1xuY29uc3QgQ09OTkVDVElPTl9SRVRSWV9ERUxBWV9NUyA9IDEwMDBcblxuLy8gQ3JlYXRlIGEgY29ubmVjdGlvbiBwb29sIHdpdGggZW5oYW5jZWQgc2V0dGluZ3NcbmxldCBwb29sOiBQb29sIHwgbnVsbCA9IG51bGxcblxuLy8gTWlncmF0aW9uIFNRTFxuY29uc3QgTUlHUkFUSU9OUyA9IFtcbiAgYFxuICAtLSBGaXggc3RhY2sgY29sdW1ucyBpbiB0cmFpbGVyX2xheW91dF9pdGVtc1xuICBBTFRFUiBUQUJMRSB0cmFpbGVyX2xheW91dF9pdGVtc1xuICBEUk9QIENPTlNUUkFJTlQgSUYgRVhJU1RTIGZrX3RyYWlsZXJfbGF5b3V0X2l0ZW1zX3N0YWNrO1xuXG4gIEFMVEVSIFRBQkxFIHRyYWlsZXJfbGF5b3V0X2l0ZW1zXG4gIERST1AgQ09OU1RSQUlOVCBJRiBFWElTVFMgY2hlY2tfc3RhY2tfcG9zaXRpb247XG5cbiAgQUxURVIgVEFCTEUgdHJhaWxlcl9sYXlvdXRfaXRlbXNcbiAgRFJPUCBDT05TVFJBSU5UIElGIEVYSVNUUyBjaGVja19zdGFja19pZF92aW55bDtcblxuICAtLSBFbnN1cmUgdGhlIGNvbHVtbnMgZXhpc3Qgd2l0aCBjb3JyZWN0IHR5cGVzXG4gIEFMVEVSIFRBQkxFIHRyYWlsZXJfbGF5b3V0X2l0ZW1zXG4gIERST1AgQ09MVU1OIElGIEVYSVNUUyBzdGFja19pZDtcblxuICBBTFRFUiBUQUJMRSB0cmFpbGVyX2xheW91dF9pdGVtc1xuICBEUk9QIENPTFVNTiBJRiBFWElTVFMgc3RhY2tfcG9zaXRpb247XG5cbiAgQUxURVIgVEFCTEUgdHJhaWxlcl9sYXlvdXRfaXRlbXNcbiAgQUREIENPTFVNTiBzdGFja19pZCBJTlRFR0VSLFxuICBBREQgQ09MVU1OIHN0YWNrX3Bvc2l0aW9uIElOVEVHRVI7XG5cbiAgLS0gQWRkIGluZGV4IGZvciBzdGFjay1yZWxhdGVkIHF1ZXJpZXNcbiAgRFJPUCBJTkRFWCBJRiBFWElTVFMgaWR4X2xheW91dF9pdGVtc19zdGFjaztcbiAgQ1JFQVRFIElOREVYIGlkeF9sYXlvdXRfaXRlbXNfc3RhY2sgT04gdHJhaWxlcl9sYXlvdXRfaXRlbXMoc3RhY2tfaWQsIHN0YWNrX3Bvc2l0aW9uKTtcblxuICAtLSBBZGQgY29uc3RyYWludCB0byBlbnN1cmUgc3RhY2tfcG9zaXRpb24gaXMgcG9zaXRpdmUgd2hlbiBwcmVzZW50XG4gIEFMVEVSIFRBQkxFIHRyYWlsZXJfbGF5b3V0X2l0ZW1zXG4gIEFERCBDT05TVFJBSU5UIGNoZWNrX3N0YWNrX3Bvc2l0aW9uIFxuICBDSEVDSyAoc3RhY2tfcG9zaXRpb24gSVMgTlVMTCBPUiBzdGFja19wb3NpdGlvbiA+IDApO1xuXG4gIC0tIEFkZCBjb25zdHJhaW50IHRvIGVuc3VyZSBzdGFja19pZCBhbmQgc3RhY2tfcG9zaXRpb24gYXJlIHVzZWQgdG9nZXRoZXJcbiAgQUxURVIgVEFCTEUgdHJhaWxlcl9sYXlvdXRfaXRlbXNcbiAgQUREIENPTlNUUkFJTlQgY2hlY2tfc3RhY2tfY29uc2lzdGVuY3lcbiAgQ0hFQ0sgKFxuICAgICAgKHN0YWNrX2lkIElTIE5VTEwgQU5EIHN0YWNrX3Bvc2l0aW9uIElTIE5VTEwpIE9SXG4gICAgICAoc3RhY2tfaWQgSVMgTk9UIE5VTEwgQU5EIHN0YWNrX3Bvc2l0aW9uIElTIE5PVCBOVUxMKVxuICApO1xuICBgXG5dXG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bk1pZ3JhdGlvbnMocG9vbDogUG9vbCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdSdW5uaW5nIGRhdGFiYXNlIG1pZ3JhdGlvbnMuLi4nKVxuICAgIGZvciAoY29uc3QgbWlncmF0aW9uIG9mIE1JR1JBVElPTlMpIHtcbiAgICAgIGF3YWl0IHBvb2wucXVlcnkobWlncmF0aW9uKVxuICAgIH1cbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgbWlncmF0aW9ucyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5JylcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBydW5uaW5nIG1pZ3JhdGlvbnM6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVQb29sKCkge1xuICBpZiAocG9vbCkgcmV0dXJuIHBvb2w7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBicmFuY2hDb25maWcgPSBjb25maWdbYnJhbmNoXVxuICAgIGlmICghYnJhbmNoQ29uZmlnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGNvbmZpZ3VyYXRpb24gZm91bmQgZm9yIGJyYW5jaDogJHticmFuY2h9YClcbiAgICB9XG5cbiAgICBwb29sID0gbmV3IFBvb2woe1xuICAgICAgLi4uYnJhbmNoQ29uZmlnLFxuICAgICAgY29ubmVjdGlvblRpbWVvdXRNaWxsaXM6IENPTk5FQ1RJT05fVElNRU9VVF9NUyxcbiAgICAgIGlkbGVUaW1lb3V0TWlsbGlzOiBJRExFX1RJTUVPVVRfTVMsXG4gICAgICBtYXg6IE1BWF9QT09MX1NJWkUsXG4gICAgICAvLyBGb3JjZSBTU0wgbW9kZVxuICAgICAgc3NsOiB7XG4gICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gSGFuZGxlIHBvb2wgZXJyb3JzXG4gICAgcG9vbC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIG9uIGlkbGUgY2xpZW50JywgZXJyKVxuICAgICAgLy8gUmVzZXQgcG9vbCBvbiBlcnJvclxuICAgICAgcG9vbCA9IG51bGxcbiAgICB9KVxuXG4gICAgLy8gQWRkIGNvbm5lY3Rpb24gbG9nZ2luZ1xuICAgIHBvb2wub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnTmV3IGRhdGFiYXNlIGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQnKVxuICAgIH0pXG5cbiAgICBwb29sLm9uKCdhY3F1aXJlJywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ0NsaWVudCBhY3F1aXJlZCBmcm9tIHBvb2wnKVxuICAgIH0pXG5cbiAgICBwb29sLm9uKCdyZW1vdmUnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnQ2xpZW50IHJlbW92ZWQgZnJvbSBwb29sJylcbiAgICB9KVxuXG4gICAgLy8gUnVuIG1pZ3JhdGlvbnNcbiAgICBydW5NaWdyYXRpb25zKHBvb2wpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBydW4gbWlncmF0aW9uczonLCBlcnJvcilcbiAgICAgIHBvb2wgPSBudWxsXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH0pXG5cbiAgICByZXR1cm4gcG9vbFxuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluaXRpYWxpemluZyBkYXRhYmFzZSBwb29sIGZvciAke2JyYW5jaH0gYnJhbmNoOmAsIGVycm9yTWVzc2FnZSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWApXG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgU1FMIHF1ZXJ5IG9uIHRoZSBkYXRhYmFzZSB3aXRoIHJldHJ5IGxvZ2ljXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeSh0ZXh0OiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSwgcmV0cnlDb3VudCA9IDApIHtcbiAgY29uc3QgTUFYX1JFVFJJRVMgPSAyXG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBjdXJyZW50UG9vbCA9IGNyZWF0ZVBvb2woKVxuICAgIGlmICghY3VycmVudFBvb2wpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjdXJyZW50UG9vbC5xdWVyeSh0ZXh0LCBwYXJhbXMpXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcbiAgICBcbiAgICAvLyBPbmx5IGxvZyBpZiBxdWVyeSB0b29rIGxvbmdlciB0aGFuIDEwMG1zIGZvciBwZXJmb3JtYW5jZSBtb25pdG9yaW5nXG4gICAgaWYgKGR1cmF0aW9uID4gMTAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnU2xvdyBxdWVyeSBkZXRlY3RlZCcsIHsgXG4gICAgICAgIHRleHQ6IHRleHQuc3Vic3RyaW5nKDAsIDUwKSArICh0ZXh0Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJyksIFxuICAgICAgICBkdXJhdGlvbiwgXG4gICAgICAgIHJvd3M6IHJlcy5yb3dDb3VudCBcbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXNcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0XG4gICAgXG4gICAgLy8gUmV0cnkgb24gY29ubmVjdGlvbiBlcnJvcnMsIGJ1dCBub3Qgb24gc3ludGF4IG9yIGNvbnN0cmFpbnQgZXJyb3JzXG4gICAgY29uc3QgaXNDb25uZWN0aW9uRXJyb3IgPSBlcnJvci5jb2RlID09PSAnRUNPTk5SRUZVU0VEJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gJ0VUSU1FRE9VVCcgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09ICcwODAwNicgfHwgLy8gY29ubmVjdGlvbl9mYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09ICcwODAwMSc7ICAgLy8gdW5hYmxlX3RvX2Nvbm5lY3RcbiAgICBcbiAgICBpZiAoaXNDb25uZWN0aW9uRXJyb3IgJiYgcmV0cnlDb3VudCA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICBjb25zb2xlLndhcm4oYERhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3IsIHJldHJ5aW5nICgke3JldHJ5Q291bnQgKyAxfS8ke01BWF9SRVRSSUVTfSkuLi5gKVxuICAgICAgLy8gUmVzZXQgcG9vbCBvbiBjb25uZWN0aW9uIGVycm9yXG4gICAgICBwb29sID0gbnVsbFxuICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgY29uc3QgZGVsYXkgPSBNYXRoLnBvdygyLCByZXRyeUNvdW50KSAqIDUwMFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSlcbiAgICAgIHJldHVybiBxdWVyeSh0ZXh0LCBwYXJhbXMsIHJldHJ5Q291bnQgKyAxKVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgcXVlcnknLCB7IFxuICAgICAgdGV4dDogdGV4dC5zdWJzdHJpbmcoMCwgMTAwKSwgXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgY29kZTogZXJyb3IuY29kZSxcbiAgICAgIGRldGFpbDogZXJyb3IuZGV0YWlsLFxuICAgICAgaGludDogZXJyb3IuaGludCxcbiAgICAgIHBvc2l0aW9uOiBlcnJvci5wb3NpdGlvblxuICAgIH0pXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIGNsaWVudCBmcm9tIHRoZSBwb29sIGZvciB0cmFuc2FjdGlvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudCgpIHtcbiAgY29uc3QgY3VycmVudFBvb2wgPSBjcmVhdGVQb29sKClcbiAgaWYgKCFjdXJyZW50UG9vbCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGN1cnJlbnRQb29sLmNvbm5lY3QoKVxuICAgIHJldHVybiBjbGllbnRcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIGRhdGFiYXNlIGNsaWVudDonLCBlcnJvck1lc3NhZ2UpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IGRhdGFiYXNlIGNsaWVudDogJHtlcnJvck1lc3NhZ2V9YClcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlbmllbnQgd3JhcHBlciBmb3IgdHJhbnNhY3Rpb25zXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhbnNhY3Rpb248VD4oY2FsbGJhY2s6IChjbGllbnQ6IGFueSkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuICBjb25zdCBjdXJyZW50UG9vbCA9IGNyZWF0ZVBvb2woKVxuICBpZiAoIWN1cnJlbnRQb29sKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBwb29sIG5vdCBpbml0aWFsaXplZCcpXG4gIH1cbiAgXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGN1cnJlbnRQb29sLmNvbm5lY3QoKVxuICBcbiAgdHJ5IHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ0JFR0lOJylcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsYmFjayhjbGllbnQpXG4gICAgYXdhaXQgY2xpZW50LnF1ZXJ5KCdDT01NSVQnKVxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1JPTExCQUNLJylcbiAgICBjb25zb2xlLmVycm9yKCdUcmFuc2FjdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKClcbiAgfVxufSAiXSwibmFtZXMiOlsiUG9vbCIsInBhcnNlQ29ubmVjdGlvblN0cmluZyIsImNvbm5lY3Rpb25TdHJpbmciLCJ1cmwiLCJVUkwiLCJ1c2VyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImhvc3QiLCJob3N0bmFtZSIsInBvcnQiLCJOdW1iZXIiLCJkYXRhYmFzZSIsInBhdGhuYW1lIiwic2xpY2UiLCJzc2wiLCJlcnJvciIsImNvbnNvbGUiLCJjb25maWciLCJwcmV2aWV3IiwibWFpbiIsImlzUHJvZHVjdGlvbiIsInByb2Nlc3MiLCJicmFuY2giLCJsb2ciLCJDT05ORUNUSU9OX1RJTUVPVVRfTVMiLCJJRExFX1RJTUVPVVRfTVMiLCJNQVhfUE9PTF9TSVpFIiwiQ09OTkVDVElPTl9SRVRSWV9BVFRFTVBUUyIsIkNPTk5FQ1RJT05fUkVUUllfREVMQVlfTVMiLCJwb29sIiwiTUlHUkFUSU9OUyIsInJ1bk1pZ3JhdGlvbnMiLCJtaWdyYXRpb24iLCJxdWVyeSIsImNyZWF0ZVBvb2wiLCJicmFuY2hDb25maWciLCJFcnJvciIsImNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzIiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJtYXgiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJvbiIsImVyciIsImNhdGNoIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsIlN0cmluZyIsInRleHQiLCJwYXJhbXMiLCJyZXRyeUNvdW50IiwiTUFYX1JFVFJJRVMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJjdXJyZW50UG9vbCIsInJlcyIsImR1cmF0aW9uIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwicm93cyIsInJvd0NvdW50IiwiaXNDb25uZWN0aW9uRXJyb3IiLCJjb2RlIiwid2FybiIsImRlbGF5IiwiTWF0aCIsInBvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImRldGFpbCIsImhpbnQiLCJwb3NpdGlvbiIsImdldENsaWVudCIsImNsaWVudCIsImNvbm5lY3QiLCJ3aXRoVHJhbnNhY3Rpb24iLCJjYWxsYmFjayIsInJlc3VsdCIsInJlbGVhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/@neondatabase","vendor-chunks/jose","vendor-chunks/ws","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/preact-render-to-string","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/@vercel","vendor-chunks/node-gyp-build","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/bufferutil"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftruckloads%2Froute&page=%2Fapi%2Ftruckloads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftruckloads%2Froute.ts&appDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Freeceschlabach%2FDesktop%2FTimberline%20Internal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();